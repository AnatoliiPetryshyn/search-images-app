{"version":3,"sources":["webpack:///./js/spinner.js","webpack:///./js/app.js","webpack:///./js/refs.js","webpack:///./js/modal.js","webpack:///./templates/galleryItems.hbs"],"names":["query","spinner","document","querySelector","js_spinner","show","classList","remove","hide","add","refs","form","imagesList","modal","modalContent","modalImg","feedContainer","infScrollInstance","InfiniteScroll","responseType","history","path","this","pageIndex","closeModal","src","alt","window","removeEventListener","handleKeyPress","event","code","on","response","markup","JSON","parse","hits","map","image","itemsTemplate","join","proxyEl","createElement","innerHTML","parsedItems","querySelectorAll","appendItems","addEventListener","e","preventDefault","input","debounce","target","value","option","loadNextPage","contains","currentImg","previousElementSibling","setAttribute","dataset","fullscreen","currentTarget","Handlebars","__webpack_require__","module","exports","template","compiler","main","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","tags","largeImageURL","likes","views","comments","downloads","useData"],"mappings":"yHAAA,ICMIA,EDNEC,EAAUC,SAASC,cAAc,YAExBC,EAAA,CACbC,KADa,WAEXJ,EAAQK,UAAUC,OAAO,cAE3BC,KAJa,WAKXP,EAAQK,UAAUG,IAAI,eEPXC,EAAA,CACbC,KAAMT,SAASC,cAAc,gBAC7BS,WAAYV,SAASC,cAAc,YACnCU,MAAOX,SAASC,cAAc,aAC9BW,aAAcZ,SAASC,cAAc,qBACrCY,SAAUb,SAASC,cAAc,mHDE7Ba,EAAgBd,SAASC,cAAc,YAEvCc,EAAoB,IAAIC,IAAeF,EAAe,CAC1DG,aAAc,OACdC,SAAS,EACTC,KAH0D,WAIxD,+GAAgHrB,EAAhH,0BACEsB,KAAKC,UADP,kBEYJ,SAASC,IACPd,EAAKG,MAAMP,UAAUC,OAAO,WAC5BG,EAAKK,SAASU,IAAM,GACpBf,EAAKK,SAASW,IAAM,GACpBC,OAAOC,oBAAoB,UAAWC,GAWxC,SAASA,EAAeC,GACH,WAAfA,EAAMC,MAIVP,IF1BFP,EAAkBe,GAAG,OAAQ,SAAAC,GAC3B,IAEMC,EAFQC,KAAKC,MAAMH,GAEJI,KAAKC,IAAI,SAAAC,GAAK,OAAIC,IAAcD,KAAQE,KAAK,IAE5DC,EAAUxC,SAASyC,cAAc,OACvCD,EAAQE,UAAYV,EAEpB,IAAMW,EAAcH,EAAQI,iBAAiB,iBAE7C7B,EAAkB8B,YAAYF,KAGhCnC,EAAKC,KAAKqC,iBAAiB,SAAU,SAAAC,GAAC,OAAIA,EAAEC,mBAE5CxC,EAAKC,KAAKwC,MAAMH,iBAAiB,QAASI,IAE1C,SAAiBH,GACfvC,EAAKE,WAAWgC,UAAY,GAC5B3B,EAAkBM,UAAY,EAE9BvB,EAAQiD,EAAEI,OAAOC,MAEjBrC,EAAkBsC,OAAO,CACvBlC,KADuB,WAErB,+GAAgHrB,EAAhH,0BACEsB,KAAKC,UADP,kBAMJN,EAAkBuC,gBAhBwC,ME/B5D9C,EAAKE,WAAWoC,iBAAiB,QAEjC,SAAmCC,GACjC,IAAKA,EAAEI,OAAO/C,UAAUmD,SAAS,qBAC/B,OAGF/C,EAAKG,MAAMP,UAAUG,IAAI,WACzBkB,OAAOqB,iBAAiB,UAAWnB,GAEnC,IAAM6B,EAAaT,EAAEI,OAAOM,uBAAuBA,uBACnD1D,EAAQI,OACRK,EAAKK,SAAS6C,aAAa,MAA3B,GAAqCF,EAAWG,QAAQC,YACxDpD,EAAKK,SAAS6C,aAAa,MAA3B,GAAqCF,EAAWhC,KAChDhB,EAAKK,SAASiC,iBAAiB,OAAQ,WACrC/C,EAAQO,WAKZE,EAAKI,aAAakC,iBAAiB,QASnC,SAA4BlB,GAC1B,GAAIA,EAAMuB,SAAWvB,EAAMiC,cACzB,OAGFvC,sCCrCF,IAAAwC,EAAiBC,EAAQ,QAEzBC,EAAAC,SAAAH,EAAA,SAAAA,GAAAI,SAAA,CAAiEC,SAAA,eAAAC,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACjE,IAAAC,EAAAC,EAAA,MAAAL,IAAAD,EAAAO,aAAA,GAA6EC,EAAAN,EAAAO,cAAAC,EAAA,WAAAC,EAAAX,EAAAY,iBAE7E,kFACAD,SAAAN,EAAA,OAAAA,EAAAH,EAAAW,eAAA,MAAAZ,IAAAY,aAAAZ,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAsLS,KAAA,eAAAC,KAAA,GAA+BZ,SAAaC,GAClO,UACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAe,OAAA,MAAAhB,IAAAgB,KAAAhB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAsKS,KAAA,OAAAC,KAAA,GAAuBZ,SAAaC,GAC1M,sBACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAgB,gBAAA,MAAAjB,IAAAiB,cAAAjB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAwLS,KAAA,gBAAAC,KAAA,GAAgCZ,SAAaC,GACrO,oIACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAiB,QAAA,MAAAlB,IAAAkB,MAAAlB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAwKS,KAAA,QAAAC,KAAA,GAAwBZ,SAAaC,GAC7M,iHACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAkB,QAAA,MAAAnB,IAAAmB,MAAAnB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAwKS,KAAA,QAAAC,KAAA,GAAwBZ,SAAaC,GAC7M,8GACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAmB,WAAA,MAAApB,IAAAoB,SAAApB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAA8KS,KAAA,WAAAC,KAAA,GAA2BZ,SAAaC,GACtN,qHACAM,SAAAN,EAAA,OAAAA,EAAAH,EAAAoB,YAAA,MAAArB,IAAAqB,UAAArB,IAAAI,EAAAG,KAAAE,EAAAL,EAAAS,KAAAR,EAAA,CAAgLS,KAAA,YAAAC,KAAA,GAA4BZ,SAAaC,GACzN,2SACCkB,SAAA","file":"main.19326896f43f8bce9aa0.js","sourcesContent":["const spinner = document.querySelector('#spinner');\r\n\r\nexport default {\r\n  show() {\r\n    spinner.classList.remove('is-hidden');\r\n  },\r\n  hide() {\r\n    spinner.classList.add('is-hidden');\r\n  },\r\n};\r\n","import debounce from 'lodash.debounce';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport itemsTemplate from '../templates/galleryItems.hbs';\r\nimport refs from './refs';\r\n\r\nlet query;\r\nconst feedContainer = document.querySelector('#gallery');\r\n\r\nconst infScrollInstance = new InfiniteScroll(feedContainer, {\r\n  responseType: 'text',\r\n  history: false,\r\n  path() {\r\n    return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?key=13096829-9bcf89c807e99d3d182216fac&q=${query}&image_type=photo&page=${\r\n      this.pageIndex\r\n    }&per_page=12`;\r\n  },\r\n});\r\n\r\ninfScrollInstance.on('load', response => {\r\n  const image = JSON.parse(response);\r\n\r\n  const markup = image.hits.map(image => itemsTemplate(image)).join('');\r\n\r\n  const proxyEl = document.createElement('div');\r\n  proxyEl.innerHTML = markup;\r\n\r\n  const parsedItems = proxyEl.querySelectorAll('.gallery-item');\r\n\r\n  infScrollInstance.appendItems(parsedItems);\r\n});\r\n\r\nrefs.form.addEventListener('submit', e => e.preventDefault());\r\n\r\nrefs.form.input.addEventListener('input', debounce(onInput, 300));\r\n\r\nfunction onInput(e) {\r\n  refs.imagesList.innerHTML = '';\r\n  infScrollInstance.pageIndex = 1;\r\n\r\n  query = e.target.value;\r\n\r\n  infScrollInstance.option({\r\n    path() {\r\n      return `https://cors-anywhere.herokuapp.com/https://pixabay.com/api/?key=13096829-9bcf89c807e99d3d182216fac&q=${query}&image_type=photo&page=${\r\n        this.pageIndex\r\n      }&per_page=12`;\r\n    },\r\n  });\r\n\r\n  infScrollInstance.loadNextPage();\r\n}\r\n","export default {\r\n  form: document.querySelector('#search-form'),\r\n  imagesList: document.querySelector('#gallery'),\r\n  modal: document.querySelector('.js-modal'),\r\n  modalContent: document.querySelector('.js-modal-content'),\r\n  modalImg: document.querySelector('.js-modal-img'),\r\n};\r\n","import refs from './refs';\r\nimport spinner from './spinner';\r\n// модальное окно\r\nrefs.imagesList.addEventListener('click', clickFullscreenBtnHandler);\r\n\r\nfunction clickFullscreenBtnHandler(e) {\r\n  if (!e.target.classList.contains('js-fullscreen-btn')) {\r\n    return;\r\n  }\r\n\r\n  refs.modal.classList.add('is-open');\r\n  window.addEventListener('keydown', handleKeyPress);\r\n\r\n  const currentImg = e.target.previousElementSibling.previousElementSibling;\r\n  spinner.show();\r\n  refs.modalImg.setAttribute('src', `${currentImg.dataset.fullscreen}`);\r\n  refs.modalImg.setAttribute('alt', `${currentImg.alt}`);\r\n  refs.modalImg.addEventListener('load', () => {\r\n    spinner.hide();\r\n  });\r\n}\r\n\r\n// закрываем модальное окно\r\nrefs.modalContent.addEventListener('click', handleOverlayClick);\r\n\r\nfunction closeModal() {\r\n  refs.modal.classList.remove('is-open');\r\n  refs.modalImg.src = '';\r\n  refs.modalImg.alt = '';\r\n  window.removeEventListener('keydown', handleKeyPress);\r\n}\r\n\r\nfunction handleOverlayClick(event) {\r\n  if (event.target !== event.currentTarget) {\r\n    return;\r\n  }\r\n\r\n  closeModal();\r\n}\r\n\r\nfunction handleKeyPress(event) {\r\n  if (event.code !== 'Escape') {\r\n    return;\r\n  }\r\n\r\n  closeModal();\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"gallery-item\\\">\\r\\n  <div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = helpers.tags || (depth0 != null ? depth0.tags : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-fullscreen=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n\\r\\n    <!-- Кнопка для открытия модалки с большим изображением, появляется при наведении -->\\r\\n    <button type=\\\"button\\\" class=\\\"fullscreen-button js-fullscreen-btn\\\">\\r\\n      <i class=\\\"material-icons\\\">zoom_out_map</i>\\r\\n    </button>\\r\\n  </div>\\r\\n</li>\";\n},\"useData\":true});"],"sourceRoot":""}